import{A as C,u as M,J as L,p as o,x as b,q as e,K as X,D as N,F as m,M as H,N as P,O as E,B as O}from"./index-4a63d28d.js";const B="_root_uqwze_1",F="_layout_uqwze_76",R="_main_uqwze_81",$="_container_uqwze_87",U="_rank_uqwze_111",K="_rankMain_uqwze_116",J="_cover_uqwze_121",Y="_coverImg_uqwze_127",G="_coverInfo_uqwze_140",Q="_coverHeader_uqwze_146",V="_coverTitle_uqwze_151",W="_coverAuthor_uqwze_167",Z="_coverAvatar_uqwze_172",ee="_coverName_uqwze_180",se="_coverDate_uqwze_180",ce="_coverPlayCount_uqwze_190",te="_coverCollect_uqwze_190",ae="_coverComment_uqwze_190",oe="_coverDesc_uqwze_202",ne="_coverDescTitle_uqwze_205",ie="_coverDescText_uqwze_212",re="_songMain_uqwze_225",le="_songHeader_uqwze_230",me="_playAll_uqwze_268",de="_collect_uqwze_275",_e="_active_uqwze_275",ve="_rankSide_uqwze_279",ue="_sideItem_uqwze_285",xe="_sideItemTitle_uqwze_291",pe="_sideItemMain_uqwze_307",he="_sideItemBox_uqwze_311",ge="_itemTitle_uqwze_321",je="_itemTime_uqwze_321",Ne="_itemImg_uqwze_324",we="_itemInfo_uqwze_330",s={root:B,layout:F,main:R,container:$,"light-scheme":"_light-scheme_uqwze_92","dark-scheme":"_dark-scheme_uqwze_96",rank:U,rankMain:K,cover:J,coverImg:Y,coverInfo:G,coverHeader:Q,coverTitle:V,coverAuthor:W,coverAvatar:Z,coverName:ee,coverDate:se,coverPlayCount:ce,coverCollect:te,coverComment:ae,coverDesc:oe,coverDescTitle:ne,coverDescText:ie,songMain:re,songHeader:le,playAll:me,collect:de,active:_e,rankSide:ve,sideItem:ue,sideItemTitle:xe,sideItemMain:pe,sideItemBox:he,itemTitle:ge,itemTime:je,itemImg:Ne,itemInfo:we},qe=[{name:"TOP榜",type:"Top"},{name:"特色榜",type:"Feature"},{name:"场景榜",type:"Other"}];let w=0;function Ie(){var h,g;const{message:d}=C.useApp(),q=M(),[y]=L(),[i,_]=o.useState(),[v,I]=o.useState([]),[a,z]=o.useState({}),[u,T]=o.useState([]),[x,p]=o.useState(!0),f=b(c=>c.playAllSong),k=async()=>{const{data:c}=await P(),t=[];if(c.code!==200)return d.error({content:c.message});qe.forEach(j=>{let l={};l.title=j.name,l.list=c.list.filter(n=>{let r=!1;switch(j.type){case"Top":r=n.ToplistType;break;case"Feature":r=!n.ToplistType&&n.name.indexOf("云音乐")>=0;break;case"Other":r=!n.ToplistType&&n.name.indexOf("云音乐")<0;break}return r}),t.push(l)}),I(t),_(()=>y.get("id")??t[0].list[0].id)},D=async()=>{p(!0);const{data:c}=await E({id:i,s:-1});if(c.code!==200)return d.error({content:c.message});const t=O(c.playlist.tracks,c.privileges);z(c.playlist),T(t),w=t.length,p(!1)},A=c=>()=>{_(c.id),q(`/rank?id=${c.id}`)},S=()=>{f(u)};return o.useEffect(()=>{k()},[]),o.useEffect(()=>{i&&D()},[i]),e.jsxs("div",{className:s.rank,children:[e.jsxs("div",{className:s.rankMain,children:[e.jsx(X,{tip:"Loading",spinning:x,children:e.jsxs("div",{className:s.cover,children:[e.jsx("div",{className:s.coverImg,children:e.jsx("img",{src:a.coverImgUrl})}),e.jsxs("div",{className:s.coverInfo,children:[e.jsx("div",{className:s.coverHeader,children:e.jsxs("div",{className:s.coverTitle,children:[a.name||"XXX"," ",e.jsxs("span",{children:["(",N(a.updateTime,"MM月dd日")," 更新)"]})]})}),e.jsxs("div",{className:s.coverAuthor,children:[e.jsx("img",{className:s.coverAvatar,src:(h=a.creator)==null?void 0:h.avatarUrl}),e.jsx("div",{className:s.coverName,children:((g=a.creator)==null?void 0:g.nickname)||"XXX"}),e.jsx("div",{className:s.coverDate,children:N(a.createTime,"yyyy-MM-dd")})]}),e.jsxs("div",{className:s.coverDigital,children:[e.jsxs("span",{className:s.coverPlayCount,children:[e.jsx("i",{className:"iconfont icon-playnum"})," ",m(a.playCount),"次"]}),e.jsxs("span",{className:s.coverCollect,children:[e.jsx("i",{className:"iconfont icon-collect"})," ",m(a.subscribedCount)]}),e.jsxs("span",{className:s.coverComment,children:[e.jsx("i",{className:"iconfont icon-comment"})," ",m(a.commentCount)]})]}),e.jsxs("div",{className:s.coverDesc,children:[e.jsx("h5",{className:s.coverDescTitle,children:"歌单简介"}),e.jsx("p",{className:s.coverDescText,children:a.description||"XXX"})]})]})]})}),e.jsxs("div",{className:s.songMain,children:[e.jsxs("div",{className:s.songHeader,children:[e.jsxs("h4",{children:["歌曲列表 ",e.jsx("em",{children:w+"首歌"})]}),e.jsxs("span",{className:s.playAll,onClick:S,children:[e.jsx("i",{className:"iconfont icon-audio-play"})," 播放全部"]}),e.jsxs("span",{className:s.collect,children:[e.jsx("i",{className:`iconfont icon-collect${a.subscribed?"-active":""}`})," ",a.subscribed?"已收藏":"收藏"]})]}),e.jsx(H,{lists:u,loading:x})]})]}),e.jsx("div",{className:s.rankSide,children:v.length?v.map(c=>e.jsxs("div",{className:s.sideItem,children:[e.jsxs("div",{className:s.sideItemTitle,children:[" ",c.title," "]}),e.jsx("div",{className:s.sideItemMain,children:c.list.map(t=>e.jsxs("div",{className:`${s.sideItemBox} ${t.id==i?"active":""}`,onClick:A(t),children:[e.jsx("img",{className:s.itemImg,src:t.coverImgUrl}),e.jsxs("div",{className:s.itemInfo,children:[e.jsx("div",{className:s.itemTitle,children:t.name}),e.jsx("div",{className:s.itemTime,children:t.updateFrequency})]})]},t.id))})]},c.title)):""})]})}export{Ie as default};
