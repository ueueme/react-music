import{A as ss,P as es,J as is,p as a,x as as,q as s,F as _,M as ns,L as y,$ as ts,a0 as ls,a1 as cs,a2 as rs,a3 as os,a4 as _s,a5 as ds,a6 as ms,Y as gs,a7 as fs}from"./index-4a63d28d.js";import{A as us}from"./list-fcb43b21.js";import{M as hs}from"./list-37dfc07e.js";const xs="_root_q431l_1",js="_layout_q431l_76",vs="_main_q431l_81",ps="_container_q431l_87",Ns="_detail_q431l_111",bs="_detail_main_q431l_116",qs="_detail_aside_q431l_121",As="_detail_headImg_q431l_125",Ss="_detail_info_q431l_138",ws="_cover_img_q431l_145",$s="_singer_info_q431l_152",ys="_singer_actor_q431l_157",Ls="_singer_name_q431l_163",Cs="_singer_alias_q431l_170",ks="_singer_digital_q431l_182",Ds="_singer_count_q431l_191",Is="_followed_q431l_203",Ms="_singer_oper_q431l_221",zs="_singer_btn_q431l_225",Fs="_iconfont_q431l_239",Ps="_active_q431l_243",Ts="_singer_box_q431l_246",Es="_singer_fans_q431l_253",Hs="_aside_title_q431l_256",Os="_fans_main_q431l_273",Vs="_fans_list_q431l_278",Us="_fans_item_q431l_281",Bs="_fans_num_q431l_295",Js="_fans_tips_q431l_306",Rs="_simi_item_q431l_312",Ys="_simi_left_q431l_318",Gs="_simi_info_q431l_328",Ks="_simi_name_q431l_348",Qs="_simi_oper_q431l_351",Ws="_singer_collect_q431l_366",Xs="_singer_main_q431l_387",Zs="_singer_header_q431l_390",se="_singer_tab_q431l_403",ee="_playAll_q431l_445",ie="_singer_list_q431l_456",ae="_singner_box_q431l_456",ne="_singer_brief_q431l_463",te="_artist_desc_main_q431l_463",le="_introduction_q431l_466",i={root:xs,layout:js,main:vs,container:ps,"light-scheme":"_light-scheme_q431l_92","dark-scheme":"_dark-scheme_q431l_96",detail:Ns,detail_main:bs,detail_aside:qs,detail_headImg:As,detail_info:Ss,cover_img:ws,singer_info:$s,singer_actor:ys,singer_name:Ls,singer_alias:Cs,singer_digital:ks,singer_count:Ds,followed:Is,singer_oper:Ms,singer_btn:zs,iconfont:Fs,active:Ps,singer_box:Ts,singer_fans:Es,aside_title:Hs,fans_main:Os,fans_list:Vs,fans_item:Us,fans_num:Bs,fans_tips:Js,simi_item:Rs,simi_left:Ys,simi_info:Gs,simi_name:Ks,simi_oper:Qs,singer_collect:Ws,singer_main:Xs,singer_header:Zs,singer_tab:se,playAll:ee,singer_list:ie,singner_box:ae,singer_brief:ne,artist_desc_main:te,introduction:le};function me(){const{message:c}=ss.useApp(),L=es(),[C]=is(),o=C.get("id")??"",[t,j]=a.useState({}),[v,k]=a.useState([]),[D,I]=a.useState({}),[h,p]=a.useState([]),[m,M]=a.useState([]),[N,z]=a.useState([]),[b,F]=a.useState([]),[q,P]=a.useState(),[A,T]=a.useState([]),[l,E]=a.useState("hot"),[H,O]=as(e=>[e.playAllSong,e.addToList]),[ce,S]=a.useState(!0),[x,r]=a.useState(!0),[g,re]=a.useState({id:o,limit:24,offset:0}),V=async()=>{S(!0);const{data:e}=await ts({id:o,timestamp:new Date().valueOf()});if(e.code!==200)return c.error({content:e.message});j({...e.data.artist,...e.data.user}),S(!1)},U=async()=>{r(!0);const{data:e}=await ls({id:o,timestamp:new Date().valueOf()});if(e.code!==200)return c.error({content:e.message});const n=e.hotSongs.map(u=>cs(u));M(n),r(!1)},B=async e=>{r(!0);const{data:n}=await rs(e);if(n.code!==200)return c.error({content:n.message});z(n.hotAlbums),r(!1)},J=async e=>{r(!0);const{data:n}=await os(e);if(n.code!==200)return c.error({content:n.message});F(n.mvs),r(!1)},R=async()=>{r(!0);const{data:e}=await _s({id:o});if(e.code!==200)return c.error({content:e.message});P(e.briefDesc),T(e.introduction),r(!1)},Y=()=>{H(m)},G=()=>{O(m)},K=()=>{},f=e=>()=>{E(e)},Q=async()=>{const{data:e}=await ds({id:o});if(e.code!==200)return c.error({content:e.message});k(e.data)},W=async()=>{const{data:e}=await ms({id:o});if(e.code!==200)return c.error({content:e.message});I(e.data)},w=(e,n)=>async()=>{const{data:u}=await gs({id:e.id,t:e.followed?0:1});if(u.code!==200)return c.error({content:u.message});if(n=="list"){const d=[...h],Z=d.find($=>$.id==$.id);Z.followed=+!e.followed,p(d)}if(n=="user"){const d=Object.assign({},t);d.followed=+!e.followed,j(d)}},X=async()=>{const{data:e}=await fs({id:o});if(e.code!==200)return c.error({content:e.message});p(e.artists.slice(0,8))};return a.useEffect(()=>{V(),Q(),W(),X()},[L]),a.useEffect(()=>{l=="hot"&&!m.length&&U(),l=="album"&&!N.length&&B(g),l=="mv"&&!b.length&&J(g),l=="brief"&&!q&&R()},[l]),s.jsxs("div",{className:i.detail,children:[s.jsxs("div",{className:i.detail_main,children:[s.jsx("div",{className:i.detail_headImg,children:s.jsx("img",{src:t.cover,alt:""})}),s.jsxs("div",{className:i.detail_info,children:[s.jsx("div",{className:i.cover,children:s.jsx("div",{className:i.cover_img,children:s.jsx("img",{src:`${t.avatar}?param=250y250`})})}),s.jsxs("div",{className:i.singer_info,children:[s.jsx("div",{className:i.singer_name,children:t.name}),s.jsx("div",{className:i.singer_alias,children:t.alias&&t.alias.map(e=>s.jsx("span",{children:e},e))}),s.jsxs("div",{className:i.singer_digital,children:[s.jsxs("span",{className:i.singer_count,children:[s.jsx("em",{children:"单曲"}),_(t.musicSize)]}),s.jsxs("span",{className:i.singer_count,children:[s.jsx("em",{children:"专辑"}),_(t.albumSize)]}),s.jsxs("span",{className:i.singer_count,children:[s.jsx("em",{children:"MV"}),_(t.mvSize)]})]})]}),s.jsx("div",{className:i.followed,children:s.jsxs("span",{className:t.followed?"active":"",onClick:w(t,"user"),children:[s.jsx("i",{className:`iconfont icon-collect${t.followed?"-active":""}`}),t.followed?"已关注":"关注TA"]})})]}),s.jsxs("div",{className:i.singer_main,children:[s.jsxs("div",{className:i.singer_header,children:[s.jsx("em",{children:"作品集"}),s.jsxs("div",{className:i.singer_tab,children:[s.jsx("span",{className:l==="hot"?"active":"",onClick:f("hot"),children:"热门作品"}),s.jsx("span",{className:l==="album"?"active":"",onClick:f("album"),children:"所有专辑"}),s.jsx("span",{className:l==="mv"?"active":"",onClick:f("mv"),children:"相关MV"}),s.jsx("span",{className:l==="brief"?"active":"",onClick:f("brief"),children:"艺人介绍"})]}),l=="hot"&&s.jsxs("div",{className:i.song_oper,children:[s.jsxs("span",{onClick:Y,className:`${i.singer_btn} ${i.playAll}`,children:[s.jsx("i",{className:"iconfont icon-audio-play"})," 播放全部"]}),s.jsxs("span",{onClick:G,className:`${i.singer_btn} ${i.addAll}`,children:[s.jsx("i",{className:"iconfont icon-add"})," 添加到播放列表"]}),s.jsxs("span",{onClick:K,className:`${i.singer_btn} ${i.collectAll}`,children:[s.jsx("i",{className:"iconfont icon-collect"})," 收藏热门"]})]})]}),s.jsxs("div",{className:`${i.singer_list} ${l}`,children:[s.jsx("div",{className:`${i.singner_box} hot`,children:s.jsx(ns,{lists:m,loading:x})}),s.jsx("div",{className:`${i.singner_box} album`,children:s.jsx(us,{lists:N,loading:x,count:g.limit})}),s.jsx("div",{className:`${i.singner_box} mv`,children:s.jsx(hs,{lists:b,loading:x,count:g.limit,row:4})}),s.jsx("div",{className:`${i.singner_box} ${i.singer_brief} brief`,children:s.jsxs("div",{className:i.artist_desc_main,children:[s.jsxs("dl",{className:i.introduction,children:[s.jsx("dt",{children:"艺人介绍"}),s.jsx("dd",{children:q})]}),A.length>0&&A.map((e,n)=>s.jsxs("dl",{className:i.introduction,children:[s.jsx("dt",{children:e.ti}),s.jsx("dd",{children:e.txt})]},n))]})})]})]})]}),s.jsxs("div",{className:i.detail_aside,children:[s.jsxs("div",{className:`${i.singer_box} ${i.singer_fans}`,children:[s.jsx("div",{className:i.aside_title,children:"Fans · 粉丝"}),s.jsxs("div",{className:`${i.aside_main} ${i.fans_main}`,children:[s.jsx("div",{className:i.fans_list,children:v.length>0&&v.map(e=>s.jsx(y,{className:i.fans_item,to:{path:"/user?id=${item.userProfile.userId}"},children:s.jsx("img",{src:`${e.userProfile.avatarUrl}?param=40y40`})},e.userProfile.userId))}),s.jsxs("div",{className:i.fans_num,children:[_(D.fansCnt),s.jsx("span",{children:"人已关注"})]}),s.jsx("div",{className:i.fans_tips,children:"点击关注，聆听更多美好音乐"})]})]}),s.jsxs("div",{className:i.singer_box,children:[s.jsx("div",{className:i.aside_title,children:"相似歌手"}),s.jsx("div",{className:i.aside_main,children:h.length>0&&h.map(e=>s.jsxs("div",{className:i.simi_item,children:[s.jsxs(y,{className:i.simi_left,to:`/singer/detail?id=${e.id}`,children:[s.jsx("img",{src:e.picUrl}),s.jsxs("div",{className:i.simi_info,children:[s.jsx("div",{className:i.simi_name,children:e.name}),s.jsxs("div",{className:i.singer_digital,children:[e.musicSize&&s.jsxs("span",{className:i.singer_track,children:[_(e.musicSize),"单曲"]}),e.albumSize&&s.jsxs("span",{className:i.singer_album,children:[_(e.albumSize),"专辑"]}),e.mvSize&&s.jsxs("span",{className:i.singer_mv,children:[_(e.mvSize),"MV"]})]})]})]}),s.jsx("div",{className:i.simi_oper,children:s.jsxs("span",{className:`${i.singer_btn} ${i.singer_collect} ${e.followed?"active":""}`,onClick:w(e,"list"),children:[s.jsx("i",{className:`iconfont icon-collect${e.followed?"-active":""}`}),e.followed?"已关注":"关注TA"]})})]},e.id))})]})]})]})}export{me as default};
