import{A as N,p as r,q as s,E as g}from"./index-4a63d28d.js";import{I as y}from"./index.es-ed8105b7.js";import{M as d,a as f}from"./area-109c5739.js";import{M as E}from"./list-37dfc07e.js";const S="_root_n468l_1",k="_layout_n468l_76",A="_main_n468l_81",L="_container_n468l_87",R="_mv_n468l_111",w="_filter_header_n468l_114",C="_filter_main_n468l_136",a={root:S,layout:k,main:A,container:L,"light-scheme":"_light-scheme_n468l_92","dark-scheme":"_dark-scheme_n468l_96",mv:R,filter_header:w,filter_main:C},h=["上升最快","最新"];function q(){const{message:x}=N.useApp(),[i,l]=r.useState([]),[o,m]=r.useState(!0),[p,j]=r.useState(!1),[t,v]=r.useState({area:d[0].name,type:f[0],order:h[0],limit:30,offset:0}),_=async e=>{m(!0);const{data:n}=await g(e);if(n.code!==200)return x.error({content:n.message});const M=e.offset!==0?[...i,...n.data]:n.data;l(M),m(!1),j(n.hasMore)},c=(e,n)=>()=>{l([]),v({...t,[e]:n,offset:0})},u=()=>{if(!o){const e={...t,offset:i.length};_(e)}};return r.useEffect(()=>{_(t)},[t]),s.jsxs("div",{className:a.mv,children:[s.jsxs("div",{className:a.mv_filter,children:[s.jsxs("div",{className:a.filter_header,children:[s.jsx("i",{className:"iconfont icon-filter"}),s.jsx("span",{children:"筛选类别"})," ( ",s.jsx("em",{children:"排序"})," · ",s.jsx("em",{children:"区域"})," · ",s.jsx("em",{children:"类型"})," )"]}),s.jsxs("div",{className:a.filter_main,children:[s.jsxs("div",{className:a.filter_item,children:[s.jsx("span",{}),h.map(e=>s.jsx("em",{className:e===t.order?"active":"",onClick:c("order",e),children:e},e))]}),s.jsxs("div",{className:a.filter_item,children:[s.jsx("span",{}),d.map(e=>s.jsx("em",{className:e.name===t.area?"active":"",onClick:c("area",e.name),children:e.name},e.name))]}),s.jsxs("div",{className:a.filter_item,children:[s.jsx("span",{}),f.map(e=>s.jsx("em",{className:e===t.type?"active":"",onClick:c("type",e),children:e},e))]})]})]}),s.jsx("div",{className:a.mv_main,children:s.jsx(y,{dataLength:i.length,next:u,hasMore:p,children:s.jsx(E,{lists:i,loading:o,isScroll:!0})})})]})}export{q as default};
